(function(t){function e(e){for(var n,i,o=e[0],u=e[1],c=e[2],l=0,m=[];l<o.length;l++)i=o[l],r[i]&&m.push(r[i][0]),r[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);d&&d(e);while(m.length)m.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,i=1;i<a.length;i++){var o=a[i];0!==r[o]&&(n=!1)}n&&(s.splice(e--,1),t=u(u.s=a[0]))}return t}var n={},i={app:0},r={app:0},s=[];function o(t){return u.p+"js/"+({}[t]||t)+"."+{"chunk-242aa3a0":"b92fc79c","chunk-3000bffe":"e873ed4a"}[t]+".js"}function u(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,u),a.l=!0,a.exports}u.e=function(t){var e=[],a={"chunk-242aa3a0":1,"chunk-3000bffe":1};i[t]?e.push(i[t]):0!==i[t]&&a[t]&&e.push(i[t]=new Promise(function(e,a){for(var n="css/"+({}[t]||t)+"."+{"chunk-242aa3a0":"756e9602","chunk-3000bffe":"ae58a979"}[t]+".css",r=u.p+n,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var c=s[o],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===n||l===r))return e()}var m=document.getElementsByTagName("style");for(o=0;o<m.length;o++){c=m[o],l=c.getAttribute("data-href");if(l===n||l===r)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var n=e&&e.target&&e.target.src||r,s=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=n,delete i[t],d.parentNode.removeChild(d),a(s)},d.href=r;var f=document.getElementsByTagName("head")[0];f.appendChild(d)}).then(function(){i[t]=0}));var n=r[t];if(0!==n)if(n)e.push(n[2]);else{var s=new Promise(function(e,a){n=r[t]=[e,a]});e.push(n[2]=s);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=o(t),c=function(e){l.onerror=l.onload=null,clearTimeout(m);var a=r[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src,s=new Error("Loading chunk "+t+" failed.\n("+n+": "+i+")");s.type=n,s.request=i,a[1](s)}r[t]=void 0}};var m=setTimeout(function(){c({type:"timeout",target:l})},12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(e)},u.m=t,u.c=n,u.d=function(t,e,a){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(u.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)u.d(a,n,function(e){return t[e]}.bind(null,n));return a},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/",u.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var m=0;m<c.length;m++)e(c[m]);var d=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("64a9"),i=a.n(n);i.a},"17bf":function(t,e,a){"use strict";var n=a("e5d5"),i=a.n(n);i.a},"1d41":function(t,e,a){},"1f68":function(t,e,a){},"2cba":function(t,e,a){"use strict";var n=a("a21e"),i=a.n(n);i.a},"403a":function(t,e,a){"use strict";var n="https://api.moment.mayuko.cn/v1",i="0bc1c21f729cd0142a38af1e26d010b6";e["a"]={requestUrl:n,amapKey:i}},"406c":function(t,e,a){},4538:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mu-user__card"},[a("div",{staticClass:"mu-user__bg"}),a("div",{staticClass:"mu-user__avatar",style:{backgroundImage:"url("+t.userAvatar+")"}}),a("div",{staticClass:"mu-user__bd"},[a("div",{staticClass:"mu-user__desc"},[t._v("在"+t._s(t.userInfo.register_time)+"加入时刻")]),a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{span:"12"}},[a("div",{staticClass:"mu-user__count"},[a("p",[t._v("MOMENT")]),a("h2",[t._v(t._s(t.userInfo.count.moment))])])]),a("Col",{attrs:{span:"12"}},[a("div",{staticClass:"mu-user__count"},[a("p",[t._v("PHOTO")]),a("h2",[t._v(t._s(t.userInfo.count.image))])])])],1)],1)])},i=[],r=a("c24f"),s={name:"MomentUser",data:function(){return{userInfo:{register_time:"N/A",count:{moment:0,image:0}},userAvatar:"https://cdn.mayuko.cn/moment/20190428154821.jpg"}},watch:{uuid:function(){this.getUserInfo()}},props:{uuid:String},created:function(){this.getUserInfo()},methods:{getUserInfo:function(){var t=this;Object(r["b"])({uuid:this.uuid}).then(function(e){200===e.data.status&&(t.userInfo=e.data.data,t.userAvatar=e.data.data["avatar_url"])})}}},o=s,u=(a("b85f"),a("2877")),c=Object(u["a"])(o,n,i,!1,null,"ec24fd08",null);e["a"]=c.exports},"56d7":function(t,e,a){"use strict";a.r(e);var n=a("795b"),i=a.n(n),r=(a("cadf"),a("551c"),a("f751"),a("097d"),a("2b0e")),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},o=[],u=(a("034f"),a("2877")),c={},l=Object(u["a"])(c,s,o,!1,null,null,null),m=l.exports,d=a("e069"),f=a.n(d),p=(a("dcad"),a("1f68"),a("8c4f")),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("div",{staticClass:"mu-container"},[a("BackTop"),a("LightGallery",{attrs:{images:t.previewImages,index:t.previewIndex,"disable-scroll":!0},on:{close:function(e){t.previewIndex=null}}}),a("Row",{attrs:{gutter:16}},[a("Col",{attrs:{xs:24,sm:24,md:24,lg:{span:6,offset:1},xl:{span:4,offset:5},xxl:{span:4,offset:5}}},[t.isMobile?t._e():a("Affix",{attrs:{"offset-top":10}},[a("div",{staticClass:"mu-user"},[a("m-user",{attrs:{uuid:t.uuid}})],1),a("div",{staticClass:"mu-photo"},[a("m-photo",{attrs:{uuid:t.uuid}})],1)])],1),a("Col",{attrs:{xs:24,sm:24,md:24,lg:{span:16},xl:{span:10},xxl:{span:10}}},[t.isMobile?a("div",{staticClass:"mu-user",staticStyle:{"margin-bottom":"10px"}},[a("m-user",{attrs:{uuid:t.uuid}})],1):t._e(),t.show?a("div",{staticClass:"mu-tab"},[a("Tabs",{attrs:{animated:!1,value:t.activeTab}},[a("TabPane",{attrs:{label:"时刻",icon:"md-list",name:"list"}},[0===t.momentList.length?a("m-blank"):t._e(),t._l(t.momentList,function(e,n){return a("m-item",{attrs:{"moment-date":e.format_date.date,"moment-week":e.format_date.week,"moment-time":e.created_at,"moment-desc":e.content}},["image"===e.type?a("div",{attrs:{id:"lightgallery"}},[1===e.image.length?a("div",[a("img",{staticClass:"mu-card__image",attrs:{src:e.image[0].url+"?imageView2/1/w/1600/h/1000",alt:""},on:{click:function(e){return t.previewImage(n,0)}}})]):e.image.length%2===0?a("div",t._l(e.image.length/2,function(i,r){return a("div",[a("Row",{attrs:{gutter:4}},[a("Col",{attrs:{span:"12"}},[a("img",{staticClass:"mu-card__image",attrs:{src:e.image[2*r].url+"?imageView2/1/w/800/h/500",alt:""},on:{click:function(e){return t.previewImage(n,2*r)}}})]),a("Col",{attrs:{span:"12"}},[a("img",{staticClass:"mu-card__image",attrs:{src:e.image[2*r+1].url+"?imageView2/1/w/800/h/500",alt:""},on:{click:function(e){return t.previewImage(n,2*r+1)}}})])],1)],1)}),0):e.image.length%3===0?a("div",t._l(e.image.length/3,function(i,r){return a("div",[a("Row",{attrs:{gutter:4}},[a("Col",{attrs:{span:"8"}},[a("img",{staticClass:"mu-card__image",attrs:{src:e.image[3*r].url+"?imageView2/1/w/800/h/800",alt:""},on:{click:function(e){return t.previewImage(n,3*r)}}})]),a("Col",{attrs:{span:"8"}},[a("img",{staticClass:"mu-card__image",attrs:{src:e.image[3*r+1].url+"?imageView2/1/w/800/h/800",alt:""},on:{click:function(e){return t.previewImage(n,3*r+1)}}})]),a("Col",{attrs:{span:"8"}},[a("img",{staticClass:"mu-card__image",attrs:{src:e.image[3*r+2].url+"?imageView2/1/w/800/h/800",alt:""},on:{click:function(e){return t.previewImage(n,3*r+2)}}})])],1)],1)}),0):t._e()]):"video"===e.type?a("div",{staticClass:"mu-card__video"},[a("m-video",{attrs:{source:e.video.url}})],1):"location"===e.type?a("div",[a("img",{staticClass:"mu-card__image",attrs:{src:t.$global.requestUrl+"/moment.map?latitude="+e.location.amap_gps.latitude+"&longitude="+e.location.amap_gps.longitude,alt:""}})]):t._e()])}),t.momentList.length>0?a("div",{staticClass:"mu-nav"},[a("Button",{attrs:{type:"primary",loading:t.loading,shape:"circle"},on:{click:t.bindMoreMoment}},[t.loading?a("span",[t._v("正在加载")]):a("span",[t._v(t._s(t.showMore?"加载更多":"暂无更多"))])])],1):t._e()],2),a("TabPane",{attrs:{label:"位置",icon:"md-locate",name:"location"}},[a("m-map",{attrs:{uuid:t.uuid}})],1)],1)],1):t._e()])],1),a("m-footer")],1):t._e()},h=[],v=a("6544"),_=a("4538"),b=a("9d43"),w=a("a183"),y=a("a7b5"),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mu-map",style:t.style},[a("el-amap",{ref:"map",staticClass:"mu-amap",attrs:{vid:"amap-vue","amap-manager":t.amapManager,center:t.center,zoom:t.zoom}},t._l(t.locationList,function(t,e){return a("el-amap-marker",{attrs:{vid:e,position:t.position}})}),1)],1)},k=[],x=a("c24f"),M=a("8f9b"),I=a.n(M),L={name:"MomentMap",props:{uuid:String},data:function(){return{amapManager:M["amapManager"],zoom:5,center:[115.47752,35.163075],locationList:[],style:{height:document.body.clientHeight-152+"px"}}},mounted:function(){var t=this;Object(x["c"])({uuid:this.uuid}).then(function(e){200===e.data.status&&(t.locationList=t.format(e.data.data))})},methods:{format:function(t){var e=[];for(var a in t)e.push({position:[t[a].amap_gps.longitude,t[a].amap_gps.latitude]});return e}}},S=L,O=(a("2cba"),Object(u["a"])(S,C,k,!1,null,"48cc6bb1",null)),j=O.exports,$=a("9ed0"),E=a("97b3"),T=a("d0ea"),q={name:"home",data:function(){return{momentList:[],activeTab:"list",show:!1,loading:!1,showMore:!0,uuid:"",page:1,pageSize:10,navButton:"i-icon-arrow-down",previewImages:[],previewIndex:null,isMobile:this.$isMobile}},components:{"m-user":_["a"],"m-item":b["a"],"m-video":w["a"],"m-photo":y["a"],"m-map":j,"m-footer":$["a"],"m-blank":E["a"],LightGallery:T["a"]},created:function(){this.$Spin.show(),"undefined"==typeof this.$route.query.uuid||""===this.$route.query.uuid?window.location.href="#/welcome":(this.uuid=this.$route.query.uuid,this.requestMoment()),this.$Notice.info({title:"欢迎来到时刻Lite",desc:"你可以使用「时刻Lite」小程序来记录时刻"})},methods:{requestMoment:function(){var t=this;this.$Loading.start(),Object(v["b"])({uuid:this.uuid,page:this.page,page_size:this.pageSize}).then(function(e){200===e.data.status&&(t.momentList=t.momentList.concat(e.data.data.list),e.data.data.page===e.data.data.pages&&(t.showMore=!1)),t.show=!0,t.loading=!1,t.$Spin.hide(),t.$Loading.finish()})},handleClick:function(t,e){console.log(t,e)},bindMoreMoment:function(){this.page++,this.loading=!0,this.requestMoment()},previewImage:function(t,e){this.previewImages=this.momentList[t]["image"],this.previewIndex=e}}},U=q,A=Object(u["a"])(U,g,h,!1,null,null,null),P=A.exports;r["default"].use(p["a"]);var G=new p["a"]({mode:"hash",routes:[{path:"/",name:"home",component:P},{path:"/welcome",name:"welcome",component:function(){return a.e("chunk-3000bffe").then(a.bind(null,"eec5"))}},{path:"/moment",name:"moment",component:function(){return a.e("chunk-242aa3a0").then(a.bind(null,"471a"))}}]}),V=a("bc3a"),z=a.n(V),N=a("a7fe"),B=a.n(N),D=a("403a");a("6b22");function R(){var t=window.screen.width;return console.log("屏幕宽度"+window.screen.width),!(t>=1024)}r["default"].prototype.$global=D["a"],r["default"].prototype.$isMobile=R(),r["default"].use(B.a,z.a),r["default"].use(f.a),r["default"].config.productionTip=!1;setTimeout(function(){localStorage.clear(),r["default"].use(I.a),I.a.initAMapApiLoader({key:D["a"].amapKey,plugin:["AMap.Scale","AMap.OverView"],v:"1.4.4"})},0);z.a.interceptors.request.use(function(t){return t},function(t){return i.a.reject(t)}),z.a.interceptors.response.use(function(t){return t},function(t){return i.a.reject(t)}),new r["default"]({router:G,render:function(t){return t(m)}}).$mount("#app")},"64a9":function(t,e,a){},6544:function(t,e,a){"use strict";a.d(e,"b",function(){return u}),a.d(e,"a",function(){return c});var n=a("795b"),i=a.n(n),r=a("bc3a"),s=a.n(r),o=a("403a");function u(t){return new i.a(function(e,a){s.a.get(o["a"].requestUrl+"/web.moment.list",{params:t}).then(function(t){e(t)}).catch(function(t){a(t)})})}function c(t){return new i.a(function(e,a){s.a.get(o["a"].requestUrl+"/web.moment.detail",{params:t}).then(function(t){e(t)}).catch(function(t){a(t)})})}},"6b22":function(t,e,a){},7811:function(t,e,a){"use strict";var n=a("1d41"),i=a.n(n);i.a},"97b3":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mu-blank"},[a("img",{attrs:{src:"https://cdn.mayuko.cn/moment/20190429140421.png",alt:"空白图片"}}),a("h3",[t._v("这里什么都没有")])])}],r={name:"MomentBlank"},s=r,o=(a("7811"),a("2877")),u=Object(o["a"])(s,n,i,!1,null,"f083b722",null);e["a"]=u.exports},"9d43":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mu-card"},[a("Row",{attrs:{gutter:16}},[a("Col",{attrs:{span:t.isMobile?"4":"2"}},[a("div",{staticClass:"mu-date"},[t._v(t._s(t.momentDate))])]),a("Col",{attrs:{span:t.isMobile?"20":22}},[a("div",{staticClass:"mu-card__bd"},[a("div",{staticClass:"mu-card__info"},[a("p",[t._v(t._s(t.momentWeek))]),a("p",[t._v(t._s(t.momentTime))])]),a("div",{staticClass:"mu-card__main"},[a("div",{staticClass:"mu-card__desc"},[a("p",[t._v(t._s(t.momentDesc))])]),a("div",{staticClass:"mu-card__content"},[t._t("default")],2)])])])],1)],1)},i=[],r={name:"MomentItem",props:{"moment-date":String,"moment-week":String,"moment-time":String,"moment-desc":String},data:function(){return{isMobile:this.$isMobile}}},s=r,o=(a("17bf"),a("2877")),u=Object(o["a"])(s,n,i,!1,null,"a6b5f4fa",null);e["a"]=u.exports},"9ed0":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mu-footer"},[a("code",[t._v("时刻Lite | Design by mayuko.cn | Creat with "),a("span",{staticStyle:{color:"red"}},[t._v("❤️")]),t._v("️\n    ")])])}],r={name:"MomentFooter"},s=r,o=a("2877"),u=Object(o["a"])(s,n,i,!1,null,"b7230e94",null);e["a"]=u.exports},a183:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("VueDPlayer",{ref:"player",attrs:{options:t.options}})},i=[],r=a("71ee"),s=a.n(r),o=(a("4da9"),{name:"MomentVideo",props:{source:String},data:function(){return{player:null,options:{video:{url:"",autoplay:!1,preload:"none",theme:"#ffffff"}}}},created:function(){this.options.video.url=this.source},components:{VueDPlayer:s.a}}),u=o,c=a("2877"),l=Object(c["a"])(u,n,i,!1,null,"61f2a991",null);e["a"]=l.exports},a21e:function(t,e,a){},a7b5:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mu-photo"},[a("LightGallery",{attrs:{images:t.previewImages,index:t.previewIndex,"disable-scroll":!0},on:{close:function(e){t.previewIndex=null}}}),a("Row",[a("Col",{attrs:{span:"12"}},[a("h2",[t._v("相册")])]),a("Col",{staticStyle:{"text-align":"right","padding-right":"10px"},attrs:{span:"12"}},[a("h2",{on:{click:t.nextGalleryList}},[a("Icon",{attrs:{type:"md-swap"}})],1)])],1),a("div",[0===t.galleryList.length?a("m-blank"):t._e(),t.spinShow?a("Spin",{attrs:{fix:""}}):t._e(),t._l(t.galleryList.length/2,function(e,n){return a("Row",{attrs:{gutter:8}},[a("Col",{attrs:{span:"12"}},[a("img",{attrs:{src:t.galleryList[2*n]["url"]+"?imageView2/1/w/400/h/400",alt:""},on:{click:function(e){return t.previewGallery(2*n)}}})]),a("Col",{attrs:{span:"12"}},[a("img",{attrs:{src:t.galleryList[2*n+1]["url"]+"?imageView2/1/w/400/h/400",alt:""},on:{click:function(e){return t.previewGallery(2*n+1)}}})])],1)})],2)],1)},i=[],r=a("e814"),s=a.n(r),o=a("c24f"),u=a("d0ea"),c=a("97b3"),l={name:"MomentPhoto",data:function(){return{galleryList:[],page:1,pageSize:6,more:!0,spinShow:!0,previewImages:[],previewIndex:null}},props:{uuid:String},components:{LightGallery:u["a"],"m-blank":c["a"]},created:function(){this.getUserGallery()},watch:{uuid:function(){this.getUserGallery()}},methods:{getUserGallery:function(){var t=this;Object(o["a"])({uuid:this.uuid,page:this.page,page_size:this.pageSize}).then(function(e){200===e.data.status&&(t.galleryList=e.data.data.list,s()(e.data.data.page)===s()(e.data.data.pages)?t.more=!1:(t.more=!0,t.page++)),t.spinShow=!1})},nextGalleryList:function(){this.more||(this.page=1),this.spinShow=!0,this.getUserGallery()},previewGallery:function(t){this.previewImages=this.galleryList,this.previewIndex=t}}},m=l,d=(a("c380"),a("2877")),f=Object(d["a"])(m,n,i,!1,null,"023344c6",null);e["a"]=f.exports},b722:function(t,e,a){},b85f:function(t,e,a){"use strict";var n=a("b722"),i=a.n(n);i.a},c24f:function(t,e,a){"use strict";a.d(e,"b",function(){return u}),a.d(e,"a",function(){return c}),a.d(e,"c",function(){return l});var n=a("795b"),i=a.n(n),r=a("bc3a"),s=a.n(r),o=a("403a");function u(t){return new i.a(function(e,a){s.a.get(o["a"].requestUrl+"/web.user.info",{params:t}).then(function(t){e(t)}).catch(function(t){a(t)})})}function c(t){return new i.a(function(e,a){s.a.get(o["a"].requestUrl+"/web.user.gallery",{params:t}).then(function(t){e(t)}).catch(function(t){a(t)})})}function l(t){return new i.a(function(e,a){s.a.get(o["a"].requestUrl+"/web.user.location",{params:t}).then(function(t){e(t)}).catch(function(t){a(t)})})}},c380:function(t,e,a){"use strict";var n=a("406c"),i=a.n(n);i.a},e5d5:function(t,e,a){}});
//# sourceMappingURL=app.602c44d7.js.map