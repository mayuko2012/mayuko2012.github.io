(function(t){function e(e){for(var a,i,o=e[0],u=e[1],c=e[2],l=0,m=[];l<o.length;l++)i=o[l],r[i]&&m.push(r[i][0]),r[i]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);d&&d(e);while(m.length)m.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,i=1;i<n.length;i++){var o=n[i];0!==r[o]&&(a=!1)}a&&(s.splice(e--,1),t=u(u.s=n[0]))}return t}var a={},i={app:0},r={app:0},s=[];function o(t){return u.p+"js/"+({}[t]||t)+"."+{"chunk-3000bffe":"e873ed4a","chunk-d46747b0":"e879d58a"}[t]+".js"}function u(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(t){var e=[],n={"chunk-3000bffe":1,"chunk-d46747b0":1};i[t]?e.push(i[t]):0!==i[t]&&n[t]&&e.push(i[t]=new Promise(function(e,n){for(var a="css/"+({}[t]||t)+"."+{"chunk-3000bffe":"ae58a979","chunk-d46747b0":"862a4ca1"}[t]+".css",r=u.p+a,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var c=s[o],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===a||l===r))return e()}var m=document.getElementsByTagName("style");for(o=0;o<m.length;o++){c=m[o],l=c.getAttribute("data-href");if(l===a||l===r)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var a=e&&e.target&&e.target.src||r,s=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete i[t],d.parentNode.removeChild(d),n(s)},d.href=r;var f=document.getElementsByTagName("head")[0];f.appendChild(d)}).then(function(){i[t]=0}));var a=r[t];if(0!==a)if(a)e.push(a[2]);else{var s=new Promise(function(e,n){a=r[t]=[e,n]});e.push(a[2]=s);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=o(t),c=function(e){l.onerror=l.onload=null,clearTimeout(m);var n=r[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src,s=new Error("Loading chunk "+t+" failed.\n("+a+": "+i+")");s.type=a,s.request=i,n[1](s)}r[t]=void 0}};var m=setTimeout(function(){c({type:"timeout",target:l})},12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(e)},u.m=t,u.c=a,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)u.d(n,a,function(e){return t[e]}.bind(null,a));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/",u.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var m=0;m<c.length;m++)e(c[m]);var d=l;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("64a9"),i=n.n(a);i.a},"17bf":function(t,e,n){"use strict";var a=n("e5d5"),i=n.n(a);i.a},"1d41":function(t,e,n){},"1f68":function(t,e,n){},"2cba":function(t,e,n){"use strict";var a=n("a21e"),i=n.n(a);i.a},"403a":function(t,e,n){"use strict";var a="https://api.moment.mayuko.cn/v1",i="0bc1c21f729cd0142a38af1e26d010b6";e["a"]={requestUrl:a,amapKey:i}},"406c":function(t,e,n){},4538:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mu-user__card"},[n("div",{staticClass:"mu-user__bg"}),n("div",{staticClass:"mu-user__avatar",style:{backgroundImage:"url("+t.userAvatar+")"}}),n("div",{staticClass:"mu-user__bd"},[n("div",{staticClass:"mu-user__desc"},[t._v("在"+t._s(t.userInfo.register_time)+"加入时刻")]),n("Row",{attrs:{gutter:20}},[n("Col",{attrs:{span:"12"}},[n("div",{staticClass:"mu-user__count"},[n("p",[t._v("MOMENT")]),n("h2",[t._v(t._s(t.userInfo.count.moment))])])]),n("Col",{attrs:{span:"12"}},[n("div",{staticClass:"mu-user__count"},[n("p",[t._v("PHOTO")]),n("h2",[t._v(t._s(t.userInfo.count.image))])])])],1)],1)])},i=[],r=n("c24f"),s={name:"MomentUser",data:function(){return{userInfo:{register_time:"N/A",count:{moment:0,image:0}},userAvatar:"https://cdn.mayuko.cn/moment/20190428154821.jpg"}},watch:{uuid:function(){this.getUserInfo()}},props:{uuid:String},created:function(){this.getUserInfo()},methods:{getUserInfo:function(){var t=this;Object(r["b"])({uuid:this.uuid}).then(function(e){200===e.data.status&&(t.userInfo=e.data.data,t.userAvatar=e.data.data["avatar_url"])})}}},o=s,u=(n("b85f"),n("2877")),c=Object(u["a"])(o,a,i,!1,null,"ec24fd08",null);e["a"]=c.exports},"56d7":function(t,e,n){"use strict";n.r(e);var a=n("795b"),i=n.n(a),r=(n("cadf"),n("551c"),n("f751"),n("097d"),n("2b0e")),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],u=(n("034f"),n("2877")),c={},l=Object(u["a"])(c,s,o,!1,null,null,null),m=l.exports,d=n("e069"),f=n.n(d),p=(n("dcad"),n("1f68"),n("8c4f")),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{staticClass:"mu-container"},[n("BackTop"),n("LightGallery",{attrs:{images:t.previewImages,index:t.previewIndex,"disable-scroll":!0},on:{close:function(e){t.previewIndex=null}}}),n("Row",{attrs:{gutter:16}},[n("Col",{attrs:{xs:24,sm:24,md:24,lg:{span:6,offset:1},xl:{span:4,offset:5},xxl:{span:4,offset:5}}},[t.isMobile?t._e():n("Affix",{attrs:{"offset-top":10}},[n("div",{staticClass:"mu-user"},[n("m-user",{attrs:{uuid:t.uuid}})],1),n("div",{staticClass:"mu-photo"},[n("m-photo",{attrs:{uuid:t.uuid}})],1)])],1),n("Col",{attrs:{xs:24,sm:24,md:24,lg:{span:16},xl:{span:10},xxl:{span:10}}},[t.isMobile?n("div",{staticClass:"mu-user",staticStyle:{"margin-bottom":"10px"}},[n("m-user",{attrs:{uuid:t.uuid}})],1):t._e(),t.show?n("div",{staticClass:"mu-tab"},[n("Tabs",{attrs:{animated:!1,value:t.activeTab}},[n("TabPane",{attrs:{label:"时刻",icon:"md-list",name:"list"}},[0===t.momentList.length?n("m-blank"):t._e(),t._l(t.momentList,function(e,a){return n("m-item",{attrs:{"moment-date":e.format_date.date,"moment-week":e.format_date.week,"moment-time":e.created_at,"moment-desc":e.content}},["image"===e.type?n("div",{attrs:{id:"lightgallery"}},[1===e.image.length?n("div",[n("img",{staticClass:"mu-card__image",attrs:{src:e.image[0].url+"?imageView2/1/w/1600/h/1000",alt:""},on:{click:function(e){return t.previewImage(a,0)}}})]):e.image.length%2===0?n("div",t._l(e.image.length/2,function(i,r){return n("div",[n("Row",{attrs:{gutter:4}},[n("Col",{attrs:{span:"12"}},[n("img",{staticClass:"mu-card__image",attrs:{src:e.image[2*r].url+"?imageView2/1/w/800/h/500",alt:""},on:{click:function(e){return t.previewImage(a,2*r)}}})]),n("Col",{attrs:{span:"12"}},[n("img",{staticClass:"mu-card__image",attrs:{src:e.image[2*r+1].url+"?imageView2/1/w/800/h/500",alt:""},on:{click:function(e){return t.previewImage(a,2*r+1)}}})])],1)],1)}),0):e.image.length%3===0?n("div",t._l(e.image.length/3,function(i,r){return n("div",[n("Row",{attrs:{gutter:4}},[n("Col",{attrs:{span:"8"}},[n("img",{staticClass:"mu-card__image",attrs:{src:e.image[3*r].url+"?imageView2/1/w/800/h/800",alt:""},on:{click:function(e){return t.previewImage(a,3*r)}}})]),n("Col",{attrs:{span:"8"}},[n("img",{staticClass:"mu-card__image",attrs:{src:e.image[3*r+1].url+"?imageView2/1/w/800/h/800",alt:""},on:{click:function(e){return t.previewImage(a,3*r+1)}}})]),n("Col",{attrs:{span:"8"}},[n("img",{staticClass:"mu-card__image",attrs:{src:e.image[3*r+2].url+"?imageView2/1/w/800/h/800",alt:""},on:{click:function(e){return t.previewImage(a,3*r+2)}}})])],1)],1)}),0):t._e()]):"video"===e.type?n("div",{staticClass:"mu-card__video"},[n("m-video",{attrs:{source:e.video.url}})],1):"location"===e.type?n("div",[n("img",{staticClass:"mu-card__image",attrs:{src:t.$global.requestUrl+"/moment.map?latitude="+e.location.amap_gps.latitude+"&longitude="+e.location.amap_gps.longitude,alt:""}})]):t._e()])}),t.momentList.length>0?n("div",{staticClass:"mu-nav"},[n("Button",{attrs:{type:"primary",loading:t.loading,shape:"circle"},on:{click:t.bindMoreMoment}},[t.loading?n("span",[t._v("正在加载")]):n("span",[t._v(t._s(t.showMore?"加载更多":"暂无更多"))])])],1):t._e()],2),n("TabPane",{attrs:{label:"位置",icon:"md-locate",name:"location"}},[n("m-map",{attrs:{uuid:t.uuid}})],1)],1)],1):t._e()])],1),n("m-footer")],1):t._e()},h=[],v=n("6544"),_=n("4538"),b=n("9d43"),w=n("a183"),y=n("a7b5"),C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mu-map",style:t.style},[n("el-amap",{ref:"map",staticClass:"mu-amap",attrs:{vid:"amap-vue","amap-manager":t.amapManager,center:t.center,zoom:t.zoom}},t._l(t.locationList,function(t,e){return n("el-amap-marker",{attrs:{vid:e,position:t.position}})}),1)],1)},k=[],x=n("c24f"),M=n("8f9b"),I=n.n(M),L={name:"MomentMap",props:{uuid:String},data:function(){return{amapManager:M["amapManager"],zoom:5,center:[115.47752,35.163075],locationList:[],style:{height:document.body.clientHeight-152+"px"}}},mounted:function(){var t=this;Object(x["c"])({uuid:this.uuid}).then(function(e){200===e.data.status&&(t.locationList=t.format(e.data.data))})},methods:{format:function(t){var e=[];for(var n in t)e.push({position:[t[n].amap_gps.longitude,t[n].amap_gps.latitude]});return e}}},S=L,O=(n("2cba"),Object(u["a"])(S,C,k,!1,null,"48cc6bb1",null)),j=O.exports,$=n("9ed0"),E=n("97b3"),T=n("d0ea"),q={name:"home",data:function(){return{momentList:[],activeTab:"list",show:!1,loading:!1,showMore:!0,uuid:"",page:1,pageSize:10,navButton:"i-icon-arrow-down",previewImages:[],previewIndex:null,isMobile:this.$isMobile}},components:{"m-user":_["a"],"m-item":b["a"],"m-video":w["a"],"m-photo":y["a"],"m-map":j,"m-footer":$["a"],"m-blank":E["a"],LightGallery:T["a"]},created:function(){this.$Spin.show(),"undefined"==typeof this.$route.query.uuid||""===this.$route.query.uuid?window.location.href="/welcome":(this.uuid=this.$route.query.uuid,this.requestMoment()),this.$Notice.info({title:"欢迎来到时刻Lite",desc:"你可以使用「时刻Lite」小程序来记录时刻"})},methods:{requestMoment:function(){var t=this;this.$Loading.start(),Object(v["b"])({uuid:this.uuid,page:this.page,page_size:this.pageSize}).then(function(e){200===e.data.status&&(t.momentList=t.momentList.concat(e.data.data.list),e.data.data.page===e.data.data.pages&&(t.showMore=!1)),t.show=!0,t.loading=!1,t.$Spin.hide(),t.$Loading.finish()})},handleClick:function(t,e){console.log(t,e)},bindMoreMoment:function(){this.page++,this.loading=!0,this.requestMoment()},previewImage:function(t,e){this.previewImages=this.momentList[t]["image"],this.previewIndex=e}}},U=q,A=Object(u["a"])(U,g,h,!1,null,null,null),P=A.exports;r["default"].use(p["a"]);var G=new p["a"]({mode:"history",routes:[{path:"/",name:"home",component:P},{path:"/welcome",name:"welcome",component:function(){return n.e("chunk-3000bffe").then(n.bind(null,"eec5"))}},{path:"/moment",name:"moment",component:function(){return n.e("chunk-d46747b0").then(n.bind(null,"471a"))}}]}),V=n("bc3a"),z=n.n(V),N=n("a7fe"),B=n.n(N),D=n("403a");n("6b22");function R(){var t=window.screen.width;return console.log("屏幕宽度"+window.screen.width),!(t>=1024)}r["default"].prototype.$global=D["a"],r["default"].prototype.$isMobile=R(),r["default"].use(B.a,z.a),r["default"].use(f.a),r["default"].config.productionTip=!1;setTimeout(function(){localStorage.clear(),r["default"].use(I.a),I.a.initAMapApiLoader({key:D["a"].amapKey,plugin:["AMap.Scale","AMap.OverView"],v:"1.4.4"})},0);z.a.interceptors.request.use(function(t){return t},function(t){return i.a.reject(t)}),z.a.interceptors.response.use(function(t){return t},function(t){return i.a.reject(t)}),new r["default"]({router:G,render:function(t){return t(m)}}).$mount("#app")},"64a9":function(t,e,n){},6544:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return c});var a=n("795b"),i=n.n(a),r=n("bc3a"),s=n.n(r),o=n("403a");function u(t){return new i.a(function(e,n){s.a.get(o["a"].requestUrl+"/web.moment.list",{params:t}).then(function(t){e(t)}).catch(function(t){n(t)})})}function c(t){return new i.a(function(e,n){s.a.get(o["a"].requestUrl+"/web.moment.detail",{params:t}).then(function(t){e(t)}).catch(function(t){n(t)})})}},"6b22":function(t,e,n){},7811:function(t,e,n){"use strict";var a=n("1d41"),i=n.n(a);i.a},"97b3":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mu-blank"},[n("img",{attrs:{src:"https://cdn.mayuko.cn/moment/20190429140421.png",alt:"空白图片"}}),n("h3",[t._v("这里什么都没有")])])}],r={name:"MomentBlank"},s=r,o=(n("7811"),n("2877")),u=Object(o["a"])(s,a,i,!1,null,"f083b722",null);e["a"]=u.exports},"9d43":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mu-card"},[n("Row",{attrs:{gutter:16}},[n("Col",{attrs:{span:t.isMobile?"4":"2"}},[n("div",{staticClass:"mu-date"},[t._v(t._s(t.momentDate))])]),n("Col",{attrs:{span:t.isMobile?"20":22}},[n("div",{staticClass:"mu-card__bd"},[n("div",{staticClass:"mu-card__info"},[n("p",[t._v(t._s(t.momentWeek))]),n("p",[t._v(t._s(t.momentTime))])]),n("div",{staticClass:"mu-card__main"},[n("div",{staticClass:"mu-card__desc"},[n("p",[t._v(t._s(t.momentDesc))])]),n("div",{staticClass:"mu-card__content"},[t._t("default")],2)])])])],1)],1)},i=[],r={name:"MomentItem",props:{"moment-date":String,"moment-week":String,"moment-time":String,"moment-desc":String},data:function(){return{isMobile:this.$isMobile}}},s=r,o=(n("17bf"),n("2877")),u=Object(o["a"])(s,a,i,!1,null,"a6b5f4fa",null);e["a"]=u.exports},"9ed0":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mu-footer"},[n("code",[t._v("时刻Lite | Design by mayuko.cn | Creat with "),n("span",{staticStyle:{color:"red"}},[t._v("❤️")]),t._v("️\n    ")])])}],r={name:"MomentFooter"},s=r,o=n("2877"),u=Object(o["a"])(s,a,i,!1,null,"b7230e94",null);e["a"]=u.exports},a183:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("VueDPlayer",{ref:"player",attrs:{options:t.options}})},i=[],r=n("71ee"),s=n.n(r),o=(n("4da9"),{name:"MomentVideo",props:{source:String},data:function(){return{player:null,options:{video:{url:"",autoplay:!1,preload:"none",theme:"#ffffff"}}}},created:function(){this.options.video.url=this.source},components:{VueDPlayer:s.a}}),u=o,c=n("2877"),l=Object(c["a"])(u,a,i,!1,null,"61f2a991",null);e["a"]=l.exports},a21e:function(t,e,n){},a7b5:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mu-photo"},[n("LightGallery",{attrs:{images:t.previewImages,index:t.previewIndex,"disable-scroll":!0},on:{close:function(e){t.previewIndex=null}}}),n("Row",[n("Col",{attrs:{span:"12"}},[n("h2",[t._v("相册")])]),n("Col",{staticStyle:{"text-align":"right","padding-right":"10px"},attrs:{span:"12"}},[n("h2",{on:{click:t.nextGalleryList}},[n("Icon",{attrs:{type:"md-swap"}})],1)])],1),n("div",[0===t.galleryList.length?n("m-blank"):t._e(),t.spinShow?n("Spin",{attrs:{fix:""}}):t._e(),t._l(t.galleryList.length/2,function(e,a){return n("Row",{attrs:{gutter:8}},[n("Col",{attrs:{span:"12"}},[n("img",{attrs:{src:t.galleryList[2*a]["url"]+"?imageView2/1/w/400/h/400",alt:""},on:{click:function(e){return t.previewGallery(2*a)}}})]),n("Col",{attrs:{span:"12"}},[n("img",{attrs:{src:t.galleryList[2*a+1]["url"]+"?imageView2/1/w/400/h/400",alt:""},on:{click:function(e){return t.previewGallery(2*a+1)}}})])],1)})],2)],1)},i=[],r=n("e814"),s=n.n(r),o=n("c24f"),u=n("d0ea"),c=n("97b3"),l={name:"MomentPhoto",data:function(){return{galleryList:[],page:1,pageSize:6,more:!0,spinShow:!0,previewImages:[],previewIndex:null}},props:{uuid:String},components:{LightGallery:u["a"],"m-blank":c["a"]},created:function(){this.getUserGallery()},watch:{uuid:function(){this.getUserGallery()}},methods:{getUserGallery:function(){var t=this;Object(o["a"])({uuid:this.uuid,page:this.page,page_size:this.pageSize}).then(function(e){200===e.data.status&&(t.galleryList=e.data.data.list,s()(e.data.data.page)===s()(e.data.data.pages)?t.more=!1:(t.more=!0,t.page++)),t.spinShow=!1})},nextGalleryList:function(){this.more||(this.page=1),this.spinShow=!0,this.getUserGallery()},previewGallery:function(t){this.previewImages=this.galleryList,this.previewIndex=t}}},m=l,d=(n("c380"),n("2877")),f=Object(d["a"])(m,a,i,!1,null,"023344c6",null);e["a"]=f.exports},b722:function(t,e,n){},b85f:function(t,e,n){"use strict";var a=n("b722"),i=n.n(a);i.a},c24f:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return c}),n.d(e,"c",function(){return l});var a=n("795b"),i=n.n(a),r=n("bc3a"),s=n.n(r),o=n("403a");function u(t){return new i.a(function(e,n){s.a.get(o["a"].requestUrl+"/web.user.info",{params:t}).then(function(t){e(t)}).catch(function(t){n(t)})})}function c(t){return new i.a(function(e,n){s.a.get(o["a"].requestUrl+"/web.user.gallery",{params:t}).then(function(t){e(t)}).catch(function(t){n(t)})})}function l(t){return new i.a(function(e,n){s.a.get(o["a"].requestUrl+"/web.user.location",{params:t}).then(function(t){e(t)}).catch(function(t){n(t)})})}},c380:function(t,e,n){"use strict";var a=n("406c"),i=n.n(a);i.a},e5d5:function(t,e,n){}});
//# sourceMappingURL=app.00a30d27.js.map